# Server Monitor — Fly.io Configuration
# Monitors services reachable from this Fly Machine.

servers:
  # Self-monitoring
  - name: "Server Monitor"
    type: http
    metrics_endpoint: "http://127.0.0.1:8080/metrics"
    web_url: "https://bd-server-monitor.fly.dev"
    poll_every: 10

  - name: "Nagzerver"
    type: http
    metrics_endpoint: "https://bd-nagzerver.fly.dev/api/v1/metrics"
    web_url: "https://bd-nagzerver.fly.dev"
    poll_every: 15

  - name: "Cardzerver"
    type: http
    metrics_endpoint: "https://bd-cardzerver.fly.dev/metrics"
    web_url: "https://bd-cardzerver.fly.dev"
    poll_every: 15

  # Alities Engine retired — replaced by card-engine ingestion pipeline

  - name: "Advice App"
    type: http
    metrics_endpoint: "http://127.0.0.1:8080/advice/metrics"
    web_url: "https://bd-server-monitor.fly.dev/advice"
    poll_every: 15

  - name: "Redis (Nagz)"
    type: redis
    url: "redis://default:58b132487e1541e3aa3e478f4bd9e552@fly-nagz-redis.upstash.io:6379"
    poll_every: 15

  - name: "Postgres"
    type: postgres
    dsn: "postgresql://postgres:P%24%24Ba%23@bd-postgres.internal:5432/nagz"
    system_stats: true
    poll_every: 15
